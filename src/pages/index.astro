---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

// import "../utility/styles/card-styles.css";
import '../utility/styles/scrollbox-styles.css';

import changelog from './about/changelog.json';

import Layout from '../layouts/Layout.astro';
import Card from '../components/cards/Card.astro';

// const newsletters = await getCollection("newsletters");
// const newsletterSlice = newsletters.toReversed().slice(0,3);


import viewport1 from '../utility/image/viewport1.png'
import viewport2 from '../utility/image/viewport2.png'
import viewport3 from '../utility/image/viewport3.png'
// import viewport1 from '../utility/image/viewport1.png'
---

<Layout title="RUDY TUESDAY">

	<div class="three-column">

		<main>

			<section>
				<header>
					<h1>LOOK UPON MY WORKS, YE MIGHTY, AND DESPAIR</h1>
					<p>... nothing beside remains</p>
				</header>
			</section>
	
			<section class="newsletter">
				<h1>NEWS</h1>
				<div class="card-wrapper">
					
					<Card
						title="NEWSLETTER"
						icon="fa-newspaper">
						<div class="scrollbox scrollbox-m">
							<div class="newsletters">
								<!-- {
									newsletterSlice.map(async (newsletter) => {
									  const renderedNewsletter = await newsletter.render();
									  return (
										  <NewsletterLayout><renderedNewsletter.Content /></NewsletterLayout>
									  );
									})
								  } -->
<!-- {
								  newsletterSlice.map((newsletter => {
									console.log(newsletter)
								  }))} -->

							</div>
							</div>
							<p class="card-p" style="margin:1.5em"><b>enter your email</b> to subscribe to my newsletter where i send out archive, project and site updates, commission openings, and other goodies every few months.</p>
							<form
								action="https://buttondown.com/api/emails/embed-subscribe/rudytuesday"
								method="post"
								target="popupwindow"
								onsubmit="window.open('https://buttondown.com/rudytuesday', 'popupwindow')"
								class="embeddable-buttondown-form"
								>
								<label for="bd-email" class="visually-hidden">Enter your email</label>
								<input type="email" name="email" id="bd-email" placeholder="email@address.com" />
								
								<input type="submit" value="subscribe" />
								<p>powered by <a href="https://buttondown.com/refer/rudytuesday" target="_blank"></a>buttondown</a></p>
							</form>
					</Card>
	
				<Card
					title="CHANGELOG"
					icon="fa-pencil">
					<div class="scrollbox scrollbox-s scrollbox-light">
						<div class="scrollbox-list">
							{changelog.map((change) => {
								return <li>
									<a href={`https://github.com/rudytues-day/archive/commit/${change.id}`} class="external">
										<b>{change.date} :</b> {change.message}<em>{change.details && "â€” " + `${change.details}` + " "}</em>({change.id.slice(0,6)})
									</a>
								</li>
							})}
						</div>
					</div>
				</Card>
				</div>

			</section>
		</main>

		<aside class="column leftColumn">
			<div class="column-wrapper">
				<Image 
					src={viewport1}
					alt=""
					style="margin: 3em auto"
				/>

				<h2>LINKS</h2>
				<ul>
					<li><a href="">GITHUB</a></li>
					<li><a href="">CODEPEN</a></li>
					<li><a href="">FEDIVERSE</a></li>
					<li><a href="">BLUESKY</a></li>
					<!-- <li><a href="">TWITTER</a></li> -->
					<li><a href="">POMF.TV</a></li>
				</ul>
			</div>
			<div class="column-wrapper">
				<Image 
					src={viewport2}
					alt=""
					style="margin: 3em auto"
				/>
				<h2>SUPPORT ME</h2>
				<ul>
					<li><a href="">KO-FI</a></li>
					<li><a href="">BOOSTY</a></li>
					<li><a href="">COMMISSION</a></li>
				</ul>
			</div>
		</aside>

		<aside class="column rightColumn">
			<div class="column-wrapper">
				<div class="column-wrapper">
				<Image 
					src={viewport3}
					alt=""
					style="margin: 3em auto"
				/>
				<h2>ABOUT</h2>
					<p>rudy tuesday is a queer and neurodivergent webMaster, erotic artist and content collector.</p>
					<p>he has no greater achievements or accolades but he does have a very nice website.</p>
				<p><a href="/about">READ MORE <i class="fas fa-angles-right"></i></a></p>
			</div>
		</aside>

	</div>

</Layout>

<style>

	section:first-of-type header p {
		margin: auto;
	}

	section:first-of-type h1 {
		margin: 1em;
	}
	/* .scrollbox {
		margin: 1em;
		border: 2px solid #000;
		border-radius: 1em;
		overflow: auto;
		overflow-x: hidden;
		height: 350px;
	}

	.scrollbox-l {
		height: 350px;
	}
	.scrollbox-m {
		height: 250px;
	}

	.scrollbox-s {
		height: 150px;
	} */


	.newsletters {
		/* height: auto; */
	}

	.three-column {
		display: flex;
		flex-direction: column;
	}

	main {
		/* z-index: -9; */
		border-radius: 8px;
		/* box-shadow: var(--primary-clr-dark) 0 0 0 20px; */
	}

	aside {
		background: var(--primary-clr-dark);
		color: white;
	}

	aside h2,
	aside a {
		font-family: var(--display);
		font-size: 1.5rem;
	}

	aside p {
		margin: 1em 2em;
		text-align: center;
	}

	aside ul {
		list-style: none;
		text-align: center;
		padding: 0;
	}
	aside li {
		margin-bottom: 0.5em;
	}

	.column-wrapper {
		margin-block: 5em;
	}

	form {
		display: grid;
		gap: 1em;
	}

	header {
		text-align: center;
		margin-bottom: 4em;
	}

	section p {
		margin: 3em 0;
		text-align: center;
	}

	section:last-child {
		margin-bottom: 2.75em;
	}

	section p {
		margin: 1em;
		max-width: 800px;
	}

	section:last-child {
		margin-bottom: 0.25em;
	}

	section:last-child::after {
		margin-bottom: 0em;
	}

	section p {
		margin: 1em;
		max-width: 800px;
	}



	.visit {
		margin: auto;
		font-size: 2rem;
		color: var(--primary-clr-dark);
		text-align: center;
		font-family: var(--display);
		text-decoration: none;
		transition: ease 0.2s;
	}

	.visit .fas {
		font-size: 0.8em;
	}

	.visit:hover {
		color: var(--primary-accent-clr)
	}

	b {
		font-family: var(--display);
		font-size: 1.125rem;
    }

@media all and (min-width: 1250px) {

	section {
		margin: 3em auto;
	}

	section p {
		margin: auto;
	}

	.three-column {
		display: grid;
		grid-template-columns: 300px 1fr 300px;
		grid-template-areas: 'left middle right'
	}

	.leftColumn {
		grid-area: left
	}

	.rightColumn {
		grid-area: right;
	}

	main {
		grid-area: middle;
	}
	.grid-masonry {
		display: grid;
		grid-template-columns: 1fr 1fr;
		max-width: 800px;
	}

}

@media all and (min-width: 1200px) {

	.card-wrapper {
		padding: 0em 1em;
		margin: 5em auto;
	}

}

</style>
